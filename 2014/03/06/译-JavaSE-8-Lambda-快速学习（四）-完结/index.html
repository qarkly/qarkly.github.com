<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>[译]JavaSE 8 :Lambda 快速学习（四）  完结 | qarkly的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Lambda Expressions and Collections
前面的章节已经介绍过Function接口,也已经实现基本的Lambda表达式语法示例.这一章节我们重新回顾Lambda表达式如何通过Collection类来提升.
Lambda Expressions and Collections
到目前所创建的示例中,集合只用到一点.但是一些Lambda表达式新特征改变了集合以往的使用方式.">
<meta property="og:type" content="article">
<meta property="og:title" content="[译]JavaSE 8 :Lambda 快速学习（四）  完结">
<meta property="og:url" content="http://qarkly@github.com/2014/03/06/译-JavaSE-8-Lambda-快速学习（四）-完结/index.html">
<meta property="og:site_name" content="qarkly的博客">
<meta property="og:description" content="Lambda Expressions and Collections
前面的章节已经介绍过Function接口,也已经实现基本的Lambda表达式语法示例.这一章节我们重新回顾Lambda表达式如何通过Collection类来提升.
Lambda Expressions and Collections
到目前所创建的示例中,集合只用到一点.但是一些Lambda表达式新特征改变了集合以往的使用方式.">
<meta property="og:updated_time" content="2015-08-15T10:03:13.768Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[译]JavaSE 8 :Lambda 快速学习（四）  完结">
<meta name="twitter:description" content="Lambda Expressions and Collections
前面的章节已经介绍过Function接口,也已经实现基本的Lambda表达式语法示例.这一章节我们重新回顾Lambda表达式如何通过Collection类来提升.
Lambda Expressions and Collections
到目前所创建的示例中,集合只用到一点.但是一些Lambda表达式新特征改变了集合以往的使用方式.">
  
    <link rel="alternative" href="/atom.xml" title="qarkly的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/selfi.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">qarkly</a></h1>
		</hgroup>

		
		<p class="header-subtitle">个人技术博客</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/随笔">随笔</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/qarkly" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/qarkly" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Jackrabbit/" style="font-size: 10px;">Jackrabbit</a> <a href="/tags/Lambda/" style="font-size: 20px;">Lambda</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/java8/" style="font-size: 20px;">java8</a> <a href="/tags/mina/" style="font-size: 10px;">mina</a> <a href="/tags/内容仓库/" style="font-size: 10px;">内容仓库</a> <a href="/tags/生活/" style="font-size: 10px;">生活</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/系统知识/" style="font-size: 10px;">系统知识</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/责任链/" style="font-size: 10px;">责任链</a> <a href="/tags/责任链模式/" style="font-size: 10px;">责任链模式</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.csdn.net/qarkly112649">csdn的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">南京邮电大学09级,就职于华为从事web相关工作…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">qarkly</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/selfi.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">qarkly</h1>
			</hgroup>
			
			<p class="header-subtitle">个人技术博客</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/qarkly" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/qarkly" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-译-JavaSE-8-Lambda-快速学习（四）-完结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/03/06/译-JavaSE-8-Lambda-快速学习（四）-完结/" class="article-date">
  	<time datetime="2014-03-06T13:39:48.000Z" itemprop="datePublished">2014-03-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      [译]JavaSE 8 :Lambda 快速学习（四）  完结
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Lambda/">Lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java8/">java8</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><span style="font-weight:bold">Lambda Expressions and Collections</span></p>
<p><span lang="zh-CN" style="font-family:宋体">前面的章节已经介绍过</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Function</span><span lang="zh-CN" style="font-family:宋体">接口</span><span lang="en-US" style="font-family:Consolas">,</span><span lang="zh-CN" style="font-family:宋体">也已经实现基本的</span><span lang="en-US" style="font-family:Consolas">Lambda</span><span lang="zh-CN" style="font-family:宋体">表达式语法示例</span><span lang="en-US" style="font-family:Consolas">.</span><span lang="zh-CN" style="font-family:宋体">这一章节我们重新回顾</span><span lang="en-US" style="font-family:Consolas">Lambda</span><span lang="zh-CN" style="font-family:宋体">表达式如何通过</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Collection</span><span lang="zh-CN" style="font-family:宋体">类来提升</span><span lang="en-US" style="font-family:Consolas">.</span></p>
<p><span style="font-weight:bold">Lambda Expressions and Collections</span></p>
<p><span lang="zh-CN" style="font-family:宋体">到目前所创建的示例中</span><span lang="en-US" style="font-family:Calibri">,</span><span lang="zh-CN" style="font-family:宋体">集合只用到一点</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">但是一些</span><span lang="en-US" style="font-family:Calibri">Lambda</span><span lang="zh-CN" style="font-family:宋体">表达式新特征改变了集合以往的使用方式</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">这一章节将介绍这些新特征</span><span lang="en-US" style="font-family:Calibri">.</span></p>
<p><span style="font-weight:bold">新增类</span></p>
<p><span lang="en-US" style="font-family:Calibri">Drivers,pilots</span><span lang="zh-CN" style="font-family:宋体">和</span><span lang="en-US" style="font-family:Calibri">draftees</span><span lang="zh-CN" style="font-family:宋体">查询条件都已经被封装到</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">SearchCriteria</span><span lang="zh-CN" style="font-family:宋体"><br> 类中</span><span lang="en-US" style="font-family:Consolas">.</span></p>
<p>SearchCriteria.java</p>
<pre code_snippet_id="221818" snippet_file_name="blog_20140306_1_6644823" name="code" class="java">package com.example.lambda;  
 import java.util.HashMap;
 import java.util.Map;
 import java.util.function.Predicate;

 /**
  *
  * @author MikeW
  */
 public class SearchCriteria {

   private final Map&lt;String, Predicate&lt;Person&gt;&gt; searchMap = new HashMap&lt;&gt;();

   private SearchCriteria() {
     super();
     initSearchMap();
   }

   private void initSearchMap() {
     Predicate&lt;Person&gt; allDrivers = p -&gt; p.getAge() &gt;= 16;
     Predicate&lt;Person&gt; allDraftees = p -&gt; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25 &amp;&amp; p.getGender() == Gender.MALE;
     Predicate&lt;Person&gt; allPilots = p -&gt; p.getAge() &gt;= 23 &amp;&amp; p.getAge() &lt;= 65;

     searchMap.put(&quot;allDrivers&quot;, allDrivers);
     searchMap.put(&quot;allDraftees&quot;, allDraftees);
     searchMap.put(&quot;allPilots&quot;, allPilots);

   }

   public Predicate&lt;Person&gt; getCriteria(String PredicateName) {
     Predicate&lt;Person&gt; target;

     target = searchMap.get(PredicateName);

     if (target == null) {

       System.out.println(&quot;Search Criteria not found... &quot;);
       System.exit(1);

     }

     return target;

   }

   public static SearchCriteria getInstance() {
     return new SearchCriteria();
   }
 }</pre>

<p><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Predicate</span><span lang="zh-CN" style="font-family:Calibri"></span><span lang="zh-CN" style="font-family:宋体">依赖的查询条件存储在这个类中</span><span lang="en-US" style="font-family:Consolas">,</span><span lang="zh-CN" style="font-family:宋体">对于我们的测试方法也是可以获取到的</span><span lang="en-US" style="font-family:Consolas">.</span></p>
<p><span style="font-weight:bold">循环</span></p>
<p><span lang="zh-CN" style="font-family:宋体">第一个新特性就是对于每个集合类都有一个</span><span lang="en-US" style="font-family:Calibri; color:#00B0F0">f</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">orEach</span><span lang="zh-CN" style="font-family:宋体">新方法</span><span lang="en-US" style="font-family:Consolas">.</span><span lang="zh-CN" style="font-family:宋体">下面是打印</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Person</span><span lang="zh-CN" style="font-family:宋体">列表的一些示例</span><span lang="en-US" style="font-family:Consolas">.</span></p>
<p>Test01ForEach.java</p>
<pre code_snippet_id="221818" snippet_file_name="blog_20140306_2_2075255" name="code" class="java">public class Test01ForEach {

   public static void main(String[] args) {

     List&lt;Person&gt; pl = Person.createShortList();

     System.out.println(&quot;\n=== Western Phone List ===&quot;);
     pl.forEach( p -&gt; p.printWesternName() );

     System.out.println(&quot;\n=== Eastern Phone List ===&quot;);
     pl.forEach(Person::printEasternName);

     System.out.println(&quot;\n=== Custom Phone List ===&quot;);
     pl.forEach(p -&gt; { System.out.println(p.printCustom(r -&gt; &quot;Name: &quot; + r.getGivenName() + &quot; EMail: &quot; + r.getEmail())); });

   }

 }</pre>

<p><span lang="zh-CN" style="font-family:宋体">第一个例子展示了一个标准的</span><span lang="en-US" style="font-family:Calibri">Lambda</span><span lang="zh-CN" style="font-family:宋体">表达式调用</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">printWesternName</span><span lang="zh-CN" style="font-family:宋体">方法打印出在列表中的每个人。第二个例子演示的是方法引用，在方法已经存在且表示类执行的操作的情况下使用，这种语法可以代替正常的</span><span lang="en-US" style="font-family:Consolas">Lambda</span><span lang="zh-CN" style="font-family:宋体">语法。最后的一个示例展示了</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">printCustom</span><span lang="zh-CN" style="font-family:宋体">方法在这种情况下也可以使用。请注意当</span><span lang="en-US" style="font-family:Consolas">Lambda</span><span lang="zh-CN" style="font-family:宋体">表达式中包含另一个表达式时的变量名轻微变化。</span></p>
<p><span lang="zh-CN" style="font-family:宋体">你可以用这种方式对任何集合进行迭代。基本的结构与增强的</span><span lang="en-US" style="font-family:Calibri">for</span><span lang="zh-CN" style="font-family:宋体">循环相&#20284;，但是在类内包含迭代机制带来了许多好处。</span></p>
<p><span style="font-weight:bold">链和过滤器</span></p>
<p><span lang="zh-CN" style="font-family:宋体">除了循环遍历一个集合的内容</span><span lang="en-US" style="font-family:Calibri">,</span><span lang="zh-CN" style="font-family:宋体">你还可以将这些方法链在一起</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">第一个方法可以看做是一个过滤器把</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Predicate</span><span lang="zh-CN" style="font-family:宋体">接口作为参数</span><span lang="en-US" style="font-family:Consolas">.</span></p>
<p><span lang="zh-CN" style="font-family:宋体">下面的示例是遍历一个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">List</span><span lang="zh-CN" style="font-family:宋体">经过过滤之后的结果集</span><span lang="en-US" style="font-family:Consolas">.</span></p>
<p>Test02Filter.java</p>
<pre code_snippet_id="221818" snippet_file_name="blog_20140306_3_4267082" name="code" class="java">public class Test02Filter {
   public static void main(String[] args) {

     List&lt;Person&gt; pl = Person.createShortList();

     SearchCriteria search = SearchCriteria.getInstance();

     System.out.println(&quot;\n=== Western Pilot Phone List ===&quot;);

     pl.stream().filter(search.getCriteria(&quot;allPilots&quot;))
       .forEach(Person::printWesternName);

     System.out.println(&quot;\n=== Eastern Draftee Phone List ===&quot;);

     pl.stream().filter(search.getCriteria(&quot;allDraftees&quot;))
       .forEach(Person::printEasternName);

   }
 }
</pre>

<p><span lang="zh-CN" style="font-family:宋体">第一个和最后一个循环演示了</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">List</span><span lang="zh-CN" style="font-family:宋体">是如何通过查询条件来过滤的</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">下面是最后一个循环的输出</span><span lang="en-US" style="font-family:Calibri">:</span><pre code_snippet_id="221818" snippet_file_name="blog_20140306_4_3950655" name="code" class="java">=== Eastern Draftee Phone List ===</pre></p>
<p>Name: Baker Bob<br>Age: 21  Gender: MALE<br>EMail: bob.baker@example.com<br>Phone: 201-121-4678<br>Address: 44 4th St, Smallville, KS 12333</p>
<p>Name: Doe John<br>Age: 25  Gender: MALE<br>EMail: john.doe@example.com<br>Phone: 202-123-4678<br>Address: 33 3rd St, Smallville, KS 12333<br></p>
<p><span style="font-weight:bold">越来越懒</span></p>
<p><span lang="zh-CN" style="font-family:宋体">这些特征都很有用</span><span lang="en-US" style="font-family:Calibri">,</span><span lang="zh-CN" style="font-family:宋体">但为何在已经有了</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">for</span><span lang="zh-CN" style="font-family:宋体">循环的前提下还要把这些特性加入到集合类呢</span><span lang="en-US" style="font-family:Calibri">?</span><span lang="zh-CN" style="font-family:宋体">通过把迭代功能集合到一个库中</span><span lang="en-US" style="font-family:Calibri">,</span><span lang="zh-CN" style="font-family:宋体">它可以让</span><span lang="en-US" style="font-family:Calibri">java</span><span lang="zh-CN" style="font-family:宋体">开发者能做到更好的代码优化</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">为了更好解释</span><span lang="en-US" style="font-family:Calibri">,</span><span lang="zh-CN" style="font-family:宋体">我们需要了解下面的术语定义</span><span lang="en-US" style="font-family:Calibri">:</span></p>
<ul>
<li><p><span lang="en-US" style="font-family:Calibri; font-size:10.5pt">Laziness(</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">惰性</span><span lang="en-US" style="font-family:Calibri; font-size:10.5pt">):</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">在编程中</span><span lang="en-US" style="font-family:Calibri; font-size:10.5pt">,</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">惰性是指只处理那些你想要处理的并且你需要处理的对象</span><span lang="en-US" style="font-family:Calibri; font-size:10.5pt">.</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">在前面的例子中</span><span lang="en-US" style="font-family:Calibri; font-size:10.5pt">,</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">最后的循环遍历是惰性的因为它只遍历了</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0; font-size:10.5pt">List</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">过滤后剩余的两个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0; font-size:10.5pt">Person</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">对象</span><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">.</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">这样代码更高效因为最终的处理步骤只发生在被选择的对象上</span><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">.</span></p>
</li>
<li><p><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">Eagerness(</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">急切化</span><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">):</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">在</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0; font-size:10.5pt">List</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">的每个对象上都执行操作的代码被认为是</span><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">&quot;</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">急切的</span><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">&quot;.</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">例如</span><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">,</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">一个增强的</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0; font-size:10.5pt">for</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">循环遍历整个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0; font-size:10.5pt">List</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">只为处理两个对象</span><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">,</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">这样可以认为是更</span><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">&quot;</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">急切的</span><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">&quot;</span><span lang="zh-CN" style="font-family:宋体; font-size:10.5pt">途径</span><span lang="en-US" style="font-family:Consolas; font-size:10.5pt">.</span></p>
</li>
</ul>
<p><span lang="zh-CN" style="font-family:宋体">通过把循环集成到</span><span lang="en-US" style="font-family:Calibri">Collections</span><span lang="zh-CN" style="font-family:宋体">库中</span><span lang="en-US" style="font-family:Calibri">,</span><span lang="zh-CN" style="font-family:宋体">当有机会的时候代码可以更好的优化成</span><span lang="en-US" style="font-family:Calibri">&quot;</span><span lang="zh-CN" style="font-family:宋体">惰性</span><span lang="en-US" style="font-family:Calibri">&quot;</span><span lang="zh-CN" style="font-family:宋体">操作</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">当</span><span lang="en-US" style="font-family:Calibri">&quot;</span><span lang="zh-CN" style="font-family:宋体">急切的</span><span lang="en-US" style="font-family:Calibri">&quot;</span><span lang="zh-CN" style="font-family:宋体">做法更具有意义的时候</span><span lang="en-US" style="font-family:Calibri">(</span><span lang="zh-CN" style="font-family:宋体">例如计算求和或者平均&#20540;</span><span lang="en-US" style="font-family:Calibri">),&quot;</span><span lang="zh-CN" style="font-family:宋体">急切的</span><span lang="en-US" style="font-family:Calibri">&quot;</span><span lang="zh-CN" style="font-family:宋体">操作仍可以使用</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">这样更高效更灵活相对与总使用</span><span lang="en-US" style="font-family:Calibri">&quot;</span><span lang="zh-CN" style="font-family:宋体">急切</span><span lang="en-US" style="font-family:Calibri">&quot;</span><span lang="zh-CN" style="font-family:宋体">操作而言</span><span lang="en-US" style="font-family:Calibri">.</span></p>
<p>&nbsp;</p>
<p><span lang="en-US" style="font-family:Consolas; color:#00B0F0; font-weight:bold">stream</span><span lang="zh-CN" style="font-family:宋体; color:#366092; font-weight:bold">方法</span></p>
<p><span lang="zh-CN" style="font-family:宋体">在前面的代码示例中</span><span lang="en-US" style="font-family:Calibri">,</span><span lang="zh-CN" style="font-family:宋体">我们注意到</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">stream</span><span lang="zh-CN" style="font-family:宋体">方法在过滤之前和循环开始的时候被调用</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">这个方法将一个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Collection</span><span lang="zh-CN" style="font-family:宋体">作为输入并返回一个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">java.util.stream.Stream</span><span lang="zh-CN" style="font-family:宋体">接口作为输出</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">一个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Stream</span><span lang="zh-CN" style="font-family:宋体">代表一个元素集合，任何方法都可以链上（个人注解：类&#20284;于建造者模式的一种写法，你可以连续调用</span><span lang="en-US" style="font-family:Calibri">stream</span><span lang="zh-CN" style="font-family:宋体">的各种方法）。在默认情况下，一旦元素被消耗它们将不能从</span><span lang="en-US" style="font-family:Calibri">stream</span><span lang="zh-CN" style="font-family:宋体">再次获取到（个人注解：例如调用</span><span lang="en-US" style="font-family:Calibri">forEach</span><span lang="zh-CN" style="font-family:宋体">方法）。因此，一个操作链只能在一个特定的</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Stream</span><span lang="zh-CN" style="font-family:宋体">上执行一次。此外，</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Stream</span><span lang="zh-CN" style="font-family:宋体">可以串行（默认情况下）或者并行这依赖于方法的调用。在这个章节最后有一个并行处理的</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Stream</span><span lang="zh-CN" style="font-family:宋体">示例。</span></p>
<p><span style="font-weight:bold">变化和结果</span></p>
<p><span lang="zh-CN" style="font-family:宋体">前面提到，一个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Stream</span><span lang="zh-CN" style="font-family:宋体">在使用之后被丢弃。因此，在集合里的元素是不能使用</span><span lang="en-US" style="font-family:Consolas">Stream</span><span lang="zh-CN" style="font-family:宋体">来交换或者改变。但是如果你想保存这些经过链操作之后的元素该怎么办呢？你可以将它们保存到另一个新的集合中。下面的代码将展示如何做到。</span></p>
<p>Test03toList.java</p>
<pre code_snippet_id="221818" snippet_file_name="blog_20140306_5_2554432" name="code" class="java">public class Test03toList {
   public static void main(String[] args) {

     List&lt;Person&gt; pl = Person.createShortList();

     SearchCriteria search = SearchCriteria.getInstance();

     // Make a new list after filtering.
     List&lt;Person&gt; pilotList = pl
             .stream()
             .filter(search.getCriteria(&quot;allPilots&quot;))
             .collect(Collectors.toList());

     System.out.println(&quot;\n=== Western Pilot Phone List ===&quot;);
     pilotList.forEach(Person::printWesternName);

   }

 }
</pre>

<p><span lang="en-US" style="font-family:Consolas; color:#00B0F0">collect</span><span lang="zh-CN" style="font-family:宋体">方法调用时用到一个参数</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Collectors</span><span lang="zh-CN" style="font-family:宋体">类。这个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Collectors</span><span lang="zh-CN" style="font-family:宋体">类能够返回</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">stream</span><span lang="zh-CN" style="font-family:宋体">的结果的</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">List</span><span lang="zh-CN" style="font-family:宋体">或者</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">Set</span><span lang="zh-CN" style="font-family:宋体">。这个例子展示了</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">stream</span><span lang="zh-CN" style="font-family:宋体">的结果是如何分配到新的</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">List</span><span lang="zh-CN" style="font-family:宋体">中，并遍历这个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">List</span><span lang="zh-CN" style="font-family:宋体; color:#00B0F0">。</span></p>
<p><span lang="zh-CN" style="font-family:宋体">使用</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">map</span><span lang="zh-CN" style="font-family:宋体">计算</span></p>
<p><span lang="en-US" style="font-family:Calibri">map</span><span lang="zh-CN" style="font-family:宋体">方法一般和</span><span lang="en-US" style="font-family:Calibri">filter</span><span lang="zh-CN" style="font-family:宋体">使用</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">该方法从一个类中获取某一属性并使用它</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">下面的例子演示如何使用年龄来计算的</span><span lang="en-US" style="font-family:Calibri">.</span></p>
<p>Test04Map.java</p>
<pre code_snippet_id="221818" snippet_file_name="blog_20140306_6_8334309" name="code" class="java">public class Test04Map {

   public static void main(String[] args) {
     List&lt;Person&gt; pl = Person.createShortList();

     SearchCriteria search = SearchCriteria.getInstance();

     // Calc average age of pilots old style
     System.out.println(&quot;== Calc Old Style ==&quot;);
     int sum = 0;
     int count = 0;

     for (Person p:pl){
       if (p.getAge() &gt;= 23 &amp;&amp; p.getAge() &lt;= 65 ){
         sum = sum + p.getAge();
         count++;
       }
     }

     long average = sum / count;
     System.out.println(&quot;Total Ages: &quot; + sum);
     System.out.println(&quot;Average Age: &quot; + average);

     // Get sum of ages
     System.out.println(&quot;\n== Calc New Style ==&quot;);
     long totalAge = pl
             .stream()
             .filter(search.getCriteria(&quot;allPilots&quot;))
             .mapToInt(p -&gt; p.getAge())
             .sum();

     // Get average of ages
     OptionalDouble averageAge = pl
             .parallelStream()
             .filter(search.getCriteria(&quot;allPilots&quot;))
             .mapToDouble(p -&gt; p.getAge())
             .average();

     System.out.println(&quot;Total Ages: &quot; + totalAge);
     System.out.println(&quot;Average Age: &quot; + averageAge.getAsDouble());

   }

 }
</pre>

<p><span lang="zh-CN" style="font-family:宋体">这个类的输出如下</span><span lang="en-US" style="font-family:Calibri">:</span></p>
<pre code_snippet_id="221818" snippet_file_name="blog_20140306_7_6381679" name="code" class="java">== Calc Old Style ==
Total Ages: 150
Average Age: 37

== Calc New Style ==
Total Ages: 150
Average Age: 37.5
</pre>

<p><span lang="zh-CN" style="font-family:宋体">这个程序计算在列表中所有飞行员的平均年龄</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">第一个循环演示了以前的方式通过</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">for</span><span lang="zh-CN" style="font-family:宋体">循环来计算</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">第二个循环使用</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">map</span><span lang="zh-CN" style="font-family:宋体">方法从串行流中获取每个人的年龄</span><span lang="en-US" style="font-family:Calibri">.</span><span lang="zh-CN" style="font-family:宋体">注意</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">totalAge</span><span lang="zh-CN" style="font-family:宋体">是个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">long</span><span lang="zh-CN" style="font-family:宋体">型。</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">map</span><span lang="zh-CN" style="font-family:宋体">方法返回一个</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">IntStream</span><span lang="zh-CN" style="font-family:宋体">对象，它包含</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">sum</span><span lang="zh-CN" style="font-family:宋体">方法返回</span><span lang="en-US" style="font-family:宋体; color:#00B0F0">long</span><span lang="zh-CN" style="font-family:宋体">型。</span></p>
<p><span lang="zh-CN" style="font-family:宋体">注意：为了第二次计算平均&#20540;，不需要再计算年龄的总和。这只是为了教学演示如何使用</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">sum</span><span lang="zh-CN" style="font-family:宋体">方法。</span></p>
<p><span lang="zh-CN" style="font-family:宋体">最后的循环从流（</span><span lang="en-US" style="font-family:Calibri">Stream</span><span lang="zh-CN" style="font-family:宋体">）中计算平均年龄。注意</span><span lang="en-US" style="font-family:Consolas; color:#00B0F0">parallelStream</span><span lang="zh-CN" style="font-family:宋体">方法是用来获取一个并行流这样就可以并行计算数&#20540;了。当然返回&#20540;跟上面的例子也有点不同。</span></p>
<p><span style="font-weight:bold">资源</span></p>
<p><a href="http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/examples/LambdaCollectionExamples.zip" target="_blank" rel="external">点击打开链接</a></p>
<p>&nbsp;</p>
<p><span style="font-size:24px">总结</span></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; 在这个教程中，你已经学习了如何使用：</p>
<ul>
<li><p>Java中的匿名内部类</p>
</li>
<li><p>在Java SE 8中Lambda表达式代替匿名内部类</p>
</li>
<li>Lambda表达式的正确语法</li>
<li>使用<span style="color:#00B0F0">Predicate</span>接口在列表中进行搜索</li>
<li><p><span style="color:#00B0F0">Function</span>接口来处理对象和处理类型不一致的对象</p>
</li>
<li><p>在Java SE 8中<span style="color:#00B0F0">Collections</span>加入的新特征来支持Lambda表达式</p>
<pre><code><span class="xml"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span>
<span class="code">    作者：qarkly112649 发表于2014/3/6 21:39:48 [原文链接](http://blog.csdn.net/qarkly112649/article/details/20654197)</span>
<span class="xml"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span>
<span class="xml"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span>
阅读：376 评论：0 [<span class="link_label">查看评论</span>](<span class="link_url">http://blog.csdn.net/qarkly112649/article/details/20654197#comments</span>)
<span class="xml"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span>
</code></pre></li>
</ul>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/06/05/责任链模式的使用/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          责任链模式的使用
        
      </div>
    </a>
  
  
    <a href="/2014/03/05/译-JavaSE-8-Lambda-快速学习（三）/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">[译]JavaSE 8 :Lambda 快速学习（三）</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="译-JavaSE-8-Lambda-快速学习（四）-完结" data-title="[译]JavaSE 8 :Lambda 快速学习（四）  完结" data-url="http://qarkly@github.com/2014/03/06/译-JavaSE-8-Lambda-快速学习（四）-完结/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 qarkly
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>